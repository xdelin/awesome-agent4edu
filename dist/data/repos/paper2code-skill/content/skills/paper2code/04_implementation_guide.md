# Phase 4: 코드 구현 가이드 (Implementation Guide)

## 목표
Phase 3에서 생성된 구현 계획을 바탕으로 **완전하고 실행 가능한 코드베이스**를 생성합니다.

---

## 핵심 행동 제어 규칙

### ⚠️ CRITICAL BEHAVIORAL RULES

```
⚠️ SINGLE FILE PER RESPONSE:
- 한 응답에서 정확히 하나의 파일만 구현
- 파일 간 허락을 구하지 말 것
- 완료될 때까지 계속 구현

DO:
- 논문에 명시된 것 정확히 구현
- 간단하고 직접적인 코드 작성
- 작동하는 것 우선, 우아한 것은 나중
- 각 컴포넌트 즉시 테스트
- 구현 완료 후 바로 다음 파일로 이동

DON'T:
- 파일 사이에 "다음 파일을 구현할까요?" 묻지 말 것
- 논문 요구사항 대신 고급 도구링에 시간 낭비
- 핵심 기능에 필요하지 않은 광범위한 문서화
- 재현에 필요하지 않은 최적화 유틸리티
- 과도한 추상화나 디자인 패턴
- 지시 제공만 하고 실제 코드를 작성하지 않는 것
```

### 도구 호출 전략

```
TOOL CALLING STRATEGY:
1. ⚠️ 메시지당 하나의 파일 구현
2. 결과 확인 후 다음 단계 계획
3. 파일 구현 사이클: 분석 → 구현 → 다음 파일

EXECUTION PATTERN:
- Plan First: 각 작업 전 추론 설명
- One Step at a Time: 실행 → 결과 확인 → 다음 계획 → 실행
- Iterative Progress: 점진적으로 솔루션 구축
- Strategic Sequencing: 이전 결과에 기반한 논리적 다음 단계 선택

⚠️ CRITICAL: bash와 python 도구를 사용하여 직접 논문을 복제할 것
            - 지시만 제공하지 말고 실제로 구현할 것
```

---

## 최우선 목표

논문에 언급된 **모든** 알고리즘, 실험, 방법을 구현합니다.
성공은 **완전성과 정확성**으로 측정되며, 코드 우아함이 아닙니다.

### 핵심 전략
- 논문과 구현 계획을 철저히 읽고 모든 알고리즘, 방법, 실험 식별
- 핵심 알고리즘 먼저, 그 다음 환경, 그 다음 통합 구현
- 논문에 명시된 정확한 버전과 사양 사용
- 각 컴포넌트 구현 후 즉시 테스트
- 완벽한 아키텍처보다 작동하는 구현에 집중

---

## 구현 접근법

### 파일별 점진적 구축
각 단계에서:
1. **식별**: 구현 계획에서 다음으로 구현할 것 확인
2. **구현**: 한 번에 하나의 컴포넌트 구현
3. **테스트**: 문제를 조기에 발견하기 위해 즉시 테스트
4. **통합**: 기존 컴포넌트와 통합
5. **검증**: 논문 사양과 대조 검증

---

## 구현 순서

### 1단계: 설정 및 환경 파일
```
pyproject.toml     # uv 프로젝트 설정 (uv init으로 생성)
config.py          # 모든 하이퍼파라미터와 설정
```

### 2단계: 핵심 유틸리티와 베이스 클래스
```
utils/__init__.py
utils/helpers.py   # 공통 유틸리티 함수
```

### 3단계: 메인 구현 모듈
```
models/__init__.py
models/network.py      # 핵심 네트워크 아키텍처
models/components.py   # 개별 컴포넌트

algorithms/__init__.py
algorithms/core.py     # 메인 알고리즘 구현
```

### 4단계: 학습 파이프라인
```
training/__init__.py
training/losses.py    # 손실 함수
training/trainer.py   # 학습 루프
```

### 5단계: 평가 및 실험
```
evaluation/__init__.py
evaluation/metrics.py        # 평가 지표
experiments/run_main.py      # 메인 실험 스크립트
```

### 6단계: 진입점 및 문서화
```
main.py            # 메인 진입점
README.md          # 사용 방법 문서 (uv run 명령 포함)
```

### 환경 설정 명령 (uv 사용)
```bash
# 프로젝트 시작 시
uv init
uv add torch numpy [필요한 패키지들]

# 실행
uv run python main.py
```

---

## 코드 품질 기준

### 완전성
- 플레이스홀더, TODO, 불완전한 함수 **없음**
- 적절한 에러 핸들링이 포함된 전체 기능 구현
- 올바른 시그니처와 문서화가 있는 완전한 API
- 즉시 작동하는 모든 명시된 기능

### 품질
- 언어 모범 사례를 따르는 프로덕션 수준 코드
- 포괄적인 타입 힌트와 docstring
- 적절한 로깅, 검증, 리소스 관리
- 관심사 분리가 된 깔끔한 아키텍처

### 도메인별 적응

**연구/ML 논문:**
- 수학적 정확성
- 재현성 (시드, 결정론적 연산)
- 평가 지표
- 실험 로깅

**시스템/도구:**
- CLI 인터페이스
- 설정 관리
- 에러 핸들링
- 문서화

---

## ✅ 완료 체크리스트 (MANDATORY)

작업을 완료로 간주하기 **전에** 반드시 확인:

```
✅ COMPLETENESS CHECKLIST:
- [ ] 논문에 언급된 모든 알고리즘 (약어나 대체 이름 포함)
- [ ] 명시된 정확한 버전의 모든 환경/데이터셋
- [ ] 실험에서 참조된 모든 비교 방법
- [ ] 논문의 실험을 실행할 수 있는 작동하는 통합
- [ ] 논문의 모든 metrics, figures, tables를 재현하는 완전한 코드베이스
- [ ] 결과 재현 방법을 설명하는 기본 문서

⚠️ 모든 항목이 체크되지 않으면 완료가 아님!
```

---

## 핵심 성공 요소

```
CRITICAL SUCCESS FACTORS:

1. Accuracy (정확성):
   - 논문 사양과 정확히 일치 (버전, 파라미터, 설정)
   - 수식을 코드로 정확히 변환
   - 하이퍼파라미터 값 정확히 사용

2. Completeness (완전성):
   - 주요 기여뿐만 아니라 논의된 모든 방법 구현
   - ablation study에 필요한 변형들도 구현
   - baseline 비교에 필요한 것들도 구현

3. Functionality (기능성):
   - 코드가 실제로 작동하고 실험을 성공적으로 실행
   - 에러 없이 학습/평가 가능
   - 논문의 결과를 실제로 재현 가능
```

---

## 실행 가이드라인

### 각 파일 구현 전
1. 구현 계획에서 해당 파일의 요구사항 확인
2. 의존하는 파일들이 이미 구현되었는지 확인
3. 논문의 관련 수식/알고리즘 참조

### 각 파일 구현 시
1. 완전한 import 문 작성
2. 클래스/함수 구조 정의
3. 논문의 수식/알고리즘을 코드로 변환
4. 적절한 docstring 추가
5. 에러 핸들링 추가

### 각 파일 구현 후
1. 구문 오류 없는지 확인
2. import가 모두 해결되는지 확인
3. 가능하면 간단한 테스트 실행
4. **바로 다음 파일로 이동** (허락 구하지 말 것)

---

## 파일 작성 템플릿

### Python 파일 기본 구조
```python
"""
[파일 설명]

논문: [논문 제목]
섹션: [관련 섹션 번호]
"""

import ...

# 논문의 하이퍼파라미터
PARAM_NAME = value  # 출처: Section X / Table Y


class ComponentName:
    """
    [컴포넌트 설명]

    논문의 Equation X 구현:
    [수식]
    """

    def __init__(self, ...):
        ...

    def forward(self, ...):
        # Eq. X 구현
        ...


def main():
    """메인 실행 함수"""
    ...


if __name__ == "__main__":
    main()
```

---

## 최종 확인

구현 완료 후:

1. **실행 테스트**: `python main.py` 에러 없이 실행되는가?
2. **학습 테스트**: 작은 데이터로 학습이 진행되는가?
3. **결과 확인**: 논문의 주요 결과를 재현할 수 있는가?
4. **문서 확인**: README.md에 실행 방법이 명확한가?

모든 항목이 통과하면 구현 완료!

---

## ⚠️ REMEMBER

```
논문 전체를 복제하는 것이 목표입니다.
단일 부분이나 최소 예제가 아닙니다.

파일 읽기 도구는 PAGINATED되어 있으므로,
논문의 모든 관련 부분을 읽으려면 여러 번 호출해야 합니다.

참조 코드에서 찾은 패턴이 있다면 영감으로만 사용하고,
항상 논문 원본 사양에 따라 구현하세요.
```
