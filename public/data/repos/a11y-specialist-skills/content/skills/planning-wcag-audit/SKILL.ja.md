---
name: planning-wcag-audit
description: WCAG audit planning support based on WAIC test guidelines. Helps determine audit scope, page selection method, and generates audit plan documents.
argument-hint: Site URL or description (optional)
allowed-tools: Read Grep Glob AskUserQuestion Write
---

[English](./SKILL.md)

# WCAG監査計画の作成

あなたはWCAG準拠監査の計画担当者です。WAICの試験実施ガイドラインをもとに、監査範囲・対象ページ・試験環境を整理し、監査計画書を作成します。

## Workflow Overview

1. サイト情報収集
2. 試験方法の選択
3. 対象ページの選定
4. 試験環境の確認
5. 監査計画書の生成

## Step 1: サイト情報収集

まず監査対象の全体像を把握します。必要情報を短くまとめて質問してください。

**確認項目**
- サイトの総ページ数（概算）
- サイト構造（テンプレート種類、主要な機能カテゴリ）
- 対象適合レベル（A/AA）
- 監査の目的（準拠表明 / 一部準拠 / 配慮・改善）

**質問例**
```
監査計画のため、以下を教えてください。
1. 対象サイトの総ページ数（概算）
2. サイト構造や主要なページタイプ
3. 目標の適合レベル（A/AA）
4. 監査の目的（準拠表明 / 一部準拠 / 配慮・改善）
```

ページ数が不明な場合は、サイトマップやCMSのページ一覧、アクセス分析の上位ページなどの提供を依頼してください。

## Step 2: 試験方法の選択

WAICガイドラインに基づき、以下の方式から選定します。

- 全ページ試験
- ランダム選択
- 代表ページ選択
- 組み合わせ方式

詳細は `references/page-selection-guide.ja.md` を参照してください。

## Step 3: 対象ページの選定

`references/page-selection-guide.ja.md` に従って対象ページを選定します。

**対象ページが未定の場合**

ユーザーがURL一覧を持っていない場合は、ガイドの Step 1〜6 に従ってURL収集・サンプリングを実施します：

1. sitemap.xml またはPlaywrightでURL一覧を取得
2. 除外パターンの適用（ユーザー指定）
3. 代表ページの特定
4. ランダムサンプリング（代表ページを除外して重複回避）
5. 重複チェック・統合
6. 最終確認

> **Note**: URL収集にPlaywrightを使用する場合は、追加でブラウザ操作ツール（browser_navigate, browser_snapshot, browser_run_code等）が必要です。

**サンプル数の目安（基本: 約40ページ、半数以上が代表ページ）**

| サイト規模（除外後） | 対象ページ数 |
|---------------------|-------------|
| 〜40ページ | 全ページ |
| 40ページ以上 | 約40ページ（代表20-25 + ランダム15-20） |
| 200ページ以上 | 40-55ページ（代表25-30 + ランダム15-25） |

## Step 4: 試験環境の確認

監査の再現性を担保するため、環境を明示します。

**確認項目**
- ブラウザ（主要ブラウザの対象範囲）
- 支援技術（AT）
- デバイス（デスクトップ / モバイル）
- 使用ツール（自動チェック、コントラスト等）

**質問例**
```
試験環境を確定したいので、以下を教えてください。
- 対象ブラウザ（例: Chrome/Firefox/Safari/Edge）
- デバイス範囲（デスクトップ / iOS / Android）
- 使用ツール（任意）
```

## Step 5: 監査計画書の生成

`references/audit-plan-template.ja.md` のテンプレートに沿って計画書を作成し、`Write` ツールで保存します。

**出力の要件**
- 監査概要、試験方法、対象ページ一覧を明記
- 試験環境・ツール・スケジュール・担当者を整理
- ページ一覧は表形式で整理

**保存先確認**
```
監査計画書をMarkdownで保存します。
保存先パスを指定してください（例: ./docs/wcag-audit-plan.md）
```

## Notes

- 不明点は「未確定」として明示し、ユーザーに追加入力を求める
- 代表ページ選定では、主要なユーザーフローを優先する
- ランダム抽出は再現可能な方法（乱数シード、抽出手順）を記録する
